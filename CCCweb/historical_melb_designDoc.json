{
  "token": {
    "reduce": "function (keys, values, rereduce) {\n    if (rereduce) {\n        var result = {\n            count: values[0].count,\n            year_14: values[0].year_14,\n            year_15: values[0].year_15,\n            year_16: values[0].year_16,\n            year_17: values[0].year_17,\n            year_18: values[0].year_18,\n        };\n        for (var i = 1; i < values.length; i++) {\n            result.count = result.count + values[i].count;\n            result.year_14 = result.year_14 + values[i].year_14;\n            result.year_15 = result.year_15 + values[i].year_15;\n            result.year_16 = result.year_16 + values[i].year_16;\n            result.year_17 = result.year_17 + values[i].year_17;\n            result.year_18 = result.year_18 + values[i].year_18;\n        }\n        return result\n    }\n    var result = {\n        count: 0,\n        year_14: 0,\n        year_15: 0,\n        year_16: 0,\n        year_17: 0,\n        year_18: 0\n    }\n    for (var i = 0; i < keys.length; i++) {\n        if (values[i].m.indexOf('2014') != -1) {\n            result.year_14 = result.year_14 + 1\n        }\n        else if (values[i].m.indexOf('2015') != -1) {\n            result.year_15 = result.year_15 + 1\n        }\n        else if (values[i].m.indexOf('2016') != -1) {\n            result.year_16 = result.year_16 + 1\n        }\n        else if (values[i].m.indexOf('2017') != -1) {\n            result.year_17 = result.year_17 + 1\n        }\n        else if (values[i].m.indexOf('2018') != -1) {\n            result.year_18 = result.year_18 + 1\n        }\n        result.count = result.count + 1\n    }\n    return result\n}",
    "map": "function (doc) {\n    var emojis = ['🍔', '🍟', '🍕', '🌭', '🍰', '🍫', '🍦', '🍨', '🍩', '🍺', '🍻', '😋', '🤤', '🎂', '🍷', '🍬', '🍪', '🍗', '🍜']\n    var token_list = ['Burger', 'Fast food', 'Fish and chips', 'Ice cream', 'Junk food', 'Beer', 'Soft drink', 'KFC', 'Alcohol', 'McDonald', 'Hungry Jack', 'Chocolate', 'Cake', 'Doughnut', 'Cheess', 'Fried chicken', 'dominos', 'dessert', 'Candy', 'Bubble Tea','Fries','Nugget','Pie','Sundae','Macaron','bakery','snack','chips','drunk','feast','starving']\n    for (var i = 0; i < token_list.length; i++) {\n        token_list[i] = token_list[i].toLowerCase()\n    }\n    var all = token_list.concat(emojis)\n    for (var i = 0; i < all.length; i++) {\n        if (doc.text.toLowerCase().indexOf(all[i]) != -1) {\n            emit(doc._id, { m: doc.created_at });\n            break;\n        }\n    }\n\n}"
  },
  "total": {
    "reduce": "function (keys, values, rereduce) {\n    if (rereduce) {\n        var result = {\n            count: values[0].count,\n            year_14: values[0].year_14,\n            year_15: values[0].year_15,\n            year_16: values[0].year_16,\n            year_17: values[0].year_17,\n            year_18: values[0].year_18,\n        };\n        for (var i = 1; i < values.length; i++) {\n            result.count = result.count + values[i].count;\n            result.year_14 = result.year_14 + values[i].year_14;\n            result.year_15 = result.year_15 + values[i].year_15;\n            result.year_16 = result.year_16 + values[i].year_16;\n            result.year_17 = result.year_17 + values[i].year_17;\n            result.year_18 = result.year_18 + values[i].year_18;\n        }\n        return result\n    }\n    var result = {\n        count: 0,\n        year_14: 0,\n        year_15: 0,\n        year_16: 0,\n        year_17: 0,\n        year_18: 0\n    }\n    for (var i = 0; i < keys.length; i++) {\n        if (values[i].m.indexOf('2014') != -1) {\n            result.year_14 = result.year_14 + 1\n        }\n        else if (values[i].m.indexOf('2015') != -1) {\n            result.year_15 = result.year_15 + 1\n        }\n        else if (values[i].m.indexOf('2016') != -1) {\n            result.year_16 = result.year_16 + 1\n        }\n        else if (values[i].m.indexOf('2017') != -1) {\n            result.year_17 = result.year_17 + 1\n        }\n        else if (values[i].m.indexOf('2018') != -1) {\n            result.year_18 = result.year_18 + 1\n        }\n        result.count = result.count + 1\n    }\n    return result\n}",
    "map": "function (doc) {\n\n            emit(doc._id, { m: doc.created_at });\n       \n}"
  }
}