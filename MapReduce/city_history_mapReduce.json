{
  "_id": "_design/filter",
  "_rev": "5-aae478f55ecb59712ebe0533e80f6bf3",
  "views": {
    "token": {
      "reduce": "function (keys, values, rereduce) {\n    if (rereduce) {\n        var result = {\n            count: values[0].count,\n            ade: values[0].ade,\n            mel: values[0].mel,\n            syd: values[0].syd,\n            can: values[0].can,\n            bri: values[0].bri,\n            hob: values[0].hob,\n            per: values[0].per,\n           // unknown:values[0].unknown\n\n            \n        };\n        for (var i = 1; i < values.length; i++) {\n            result.count = result.count + values[i].count;\n            result.ade = result.ade + values[i].ade;\n            result.mel= result.mel+values[i].mel;\n            result.syd=result.syd+values[i].syd;\n            result.can=result.can+values[i].can;\n            result.bri=result.bri+values[i].bri;\n            result.hob=result.hob+values[i].hob;\n            result.per=result.per+values[i].per;\n            //result.unknown=result.unknown+values[i].unknown;\n\n        }\n        return result\n    }\n    // Non-rereduce case\n    var result = {\n        count: 0,\n        ade: 0,\n        mel: 0,\n        syd: 0,\n        can: 0,\n        bri: 0,\n        hob: 0,\n        per: 0,\n        //unknown:0\n   \n   \n        \n\n    }\n    \n    var Mel_list = [144.5532, -38.2250, 145.5498, -37.5401];\n    var Syd_list = [150.6396, -34.1399, 151.3439, -33.5780];\n    var Can_list = [148.9960, -35.4799, 149.3993, -35.1244];\n    var Bri_list = [152.6859, -27.6633, 153.4685, -27.0220];\n    var Ade_list = [138.4421, -35.3490, 138.7832, -34.6481];\n    var Hob_list = [147.1762, -42.9619, 147.4628, -42.6999];\n    var Per_list = [115.5607, -32.4824, 116.4151, -31.4552];\n    // add list...\n    for (var i = 0; i < keys.length; i++) {\n\n        if(values[i].z.indexOf('Mel') !=-1){\n          result.mel = result.mel + 1\n        }\n        else if(values[i].z.indexOf('Syd') !=-1){\n          result.syd = result.syd + 1\n        }\n        else if(values[i].z.indexOf('Hob') !=-1){\n          result.hob = result.hob + 1\n        }\n      else if(values[i].z.indexOf('Per') !=-1){\n          result.per = result.per + 1\n        }\n        else if(values[i].z.indexOf('Can') !=-1){\n          result.can = result.can + 1\n        }\n        else if(values[i].z.indexOf('Bri') !=-1){\n          result.bri = result.bri + 1\n        }\n        else if(values[i].z.indexOf('Ade') !=-1){\n          result.ade = result.ade + 1\n        }\n        // else{\n        //   result.unknown= result.unknown+1\n        // }\n        result.count = result.count + 1\n    }\n    return result\n}",
      "map": "function (doc) {\n    doc_x1 = doc.place.bounding_box.coordinates[0][0][0];\n    doc_y1 = doc.place.bounding_box.coordinates[0][0][1];\n    doc_x2 = doc.place.bounding_box.coordinates[0][2][0];\n    doc_y2 = doc.place.bounding_box.coordinates[0][1][1];\n    x = (doc_x1 + doc_x2) / 2;\n    y = (doc_y1 + doc_y2) / 2;\n    z = doc.place.full_name;\n\n    var emojis = ['🍔', '🍟', '🍕', '🌭', '🍰', '🍫', '🍦', '🍨', '🍩', '🍺', '🍻', '😋', '🤤', '🎂', '🍷', '🍬', '🍪', '🍗', '🍜']\n    var token_list = ['Burger', 'Fast food', 'Fish and chips', 'Ice cream', 'Junk food', 'Beer', 'Soft drink', 'KFC', 'Alcohol', 'McDonald', 'Hungry Jack', 'Chocolate', 'Cake', 'Doughnut', 'Cheese', 'Fried chicken', 'Donut', 'Dessert', 'Candy', 'Bubble Tea','Fries','Nugget','Pie','Sundae','Macarons','bakery','snack','chips','drunk','feast','starving']\n    for (var i = 0; i < token_list.length; i++) {\n        token_list[i] = token_list[i].toLowerCase()\n    }\n    var all = token_list.concat(emojis)\n    for (var i = 0; i < all.length; i++) {\n        if (doc.text.toLowerCase().indexOf(all[i]) != -1) {\n            emit(doc.text, { x: x, y: y, z: z });\n            break;\n        }\n    }\n}",

    },
    "total": {
      "reduce": "function (keys, values, rereduce) {\n    if (rereduce) {\n        var result = {\n            count: values[0].count,\n            ade: values[0].ade,\n            mel: values[0].mel,\n            syd: values[0].syd,\n            can: values[0].can,\n            bri: values[0].bri,\n            hob: values[0].hob,\n            per: values[0].per,\n            //unknown:values[0].unknown\n\n            \n        };\n        for (var i = 1; i < values.length; i++) {\n            result.count = result.count + values[i].count;\n            result.ade = result.ade + values[i].ade;\n            result.mel= result.mel+values[i].mel;\n            result.syd=result.syd+values[i].syd;\n            result.can=result.can+values[i].can;\n            result.bri=result.bri+values[i].bri;\n            result.hob=result.hob+values[i].hob;\n            result.per=result.per+values[i].per;\n            //result.unknown=result.unknown+values[i].unknown;\n\n        }\n        return result\n    }\n    // Non-rereduce case\n    var result = {\n        count: 0,\n        ade: 0,\n        mel: 0,\n        syd: 0,\n        can: 0,\n        bri: 0,\n        hob: 0,\n        per: 0,\n        //unknown:0\n   \n   \n        \n\n    }\n    \n    var Mel_list = [144.5532, -38.2250, 145.5498, -37.5401];\n    var Syd_list = [150.6396, -34.1399, 151.3439, -33.5780];\n    var Can_list = [148.9960, -35.4799, 149.3993, -35.1244];\n    var Bri_list = [152.6859, -27.6633, 153.4685, -27.0220];\n    var Ade_list = [138.4421, -35.3490, 138.7832, -34.6481];\n    var Hob_list = [147.1762, -42.9619, 147.4628, -42.6999];\n    var Per_list = [115.5607, -32.4824, 116.4151, -31.4552];\n    // add list...\n    for (var i = 0; i < keys.length; i++) {\n\n        if(values[i].z.indexOf('Mel') !=-1){\n          result.mel = result.mel + 1\n        }\n        else if(values[i].z.indexOf('Syd') !=-1){\n          result.syd = result.syd + 1\n        }\n        else if(values[i].z.indexOf('Hob') !=-1){\n          result.hob = result.hob + 1\n        }\n      else if(values[i].z.indexOf('Per') !=-1){\n          result.per = result.per + 1\n        }\n        else if(values[i].z.indexOf('Can') !=-1){\n          result.can = result.can + 1\n        }\n        else if(values[i].z.indexOf('Bri') !=-1){\n          result.bri = result.bri + 1\n        }\n        else if(values[i].z.indexOf('Ade') !=-1){\n          result.ade = result.ade + 1\n        }\n        // else{\n        //   result.unknown= result.unknown+1\n        // }\n        result.count = result.count + 1\n    }\n    return result\n}",
      "map": "function (doc) {\n  doc_x1 = doc.place.bounding_box.coordinates[0][0][0];\n  doc_y1 = doc.place.bounding_box.coordinates[0][0][1];\n  doc_x2 = doc.place.bounding_box.coordinates[0][2][0];\n  doc_y2 = doc.place.bounding_box.coordinates[0][1][1];\n  x = (doc_x1 + doc_x2) / 2;\n  y = (doc_y1 + doc_y2) / 2;\n  z = doc.place.full_name;\n  emit(doc.text,{x:x,y:y,z:z});\n}"
    }
  },
  "language": "javascript"
}
